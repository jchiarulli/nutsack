{"version":3,"names":["NDK","create","produce","withPayload","NDKCacheAdapterSqlite","useNDKStore","set","get","ndk","undefined","currentUser","settingsStore","unpublishedEvents","Map","cacheInitialized","initialParams","init","params","user","getUserFromSettingsStore","connect","cacheAdapter","onReady","getUnpublishedEvents","then","entries","e","forEach","entry","event","id","on","draft","key","getSync","ready","onUserSet","setCurrentUser","login","payload","signer","pubkey","userInStore","logout","delete","clear","getUser"],"sourceRoot":"../../../src","sources":["stores/ndk.ts"],"mappings":"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","ignoreList":[]}
