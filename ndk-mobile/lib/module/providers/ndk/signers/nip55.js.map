{"version":3,"names":["debug","NDKUser","DEFAULT_ENCRYPTION_SCHEME","NDKRelay","IntentLauncher","NDKNip55Signer","nip04Queue","nip04Processing","constructor","waitTimeout","blockUntilReady","npub","getPublicKey","Error","user","_userPromise","sign","event","waitForExtension","signedEvent","window","nostr","signEvent","sig","relays","ndk","getRelays","activeRelays","url","Object","keys","read","write","push","map","relayAuthDefaultPolicy","encrypt","recipient","value","type","nip44Encrypt","nip04Encrypt","decrypt","sender","nip44Decrypt","nip04Decrypt","nip44","pubkey","recipientHexPubKey","queueNip04","senderHexPubKey","counterpartyHexpubkey","Promise","resolve","reject","processNip04Queue","item","retries","length","shift","result","nip04","error","message","includes","setTimeout","timerId","intervalId","setInterval","clearTimeout","clearInterval","permissions","permission","id","startActivityAsync","category","data","extra","package","JSON","stringify","resultCode","resultExtraObj","console","log"],"sourceRoot":"../../../../../src","sources":["providers/ndk/signers/nip55.ts"],"mappings":"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","ignoreList":[]}
