{"version":3,"names":["createStore","NDKRelaySet","useCallback","useEffect","useMemo","useRef","useNDK","useStore","useSessionStore","createSubscribeStore","bufferMs","set","get","buffer","timeout","flushBuffer","state","eventMap","forEach","event","currentEvent","tagId","created_at","events","Array","from","values","Map","eose","isSubscribed","subscriptionRef","undefined","addEvent","push","setTimeout","removeEventId","id","delete","setEose","clearTimeout","clearEvents","setSubscription","sub","useSubscribe","filters","opts","relays","ndk","muteList","store","storeInstance","eventIds","relaySet","length","fromRelayUrls","shouldAcceptEvent","currentVal","current","includeMuted","has","pubkey","console","log","handleEvent","includeDeleted","isParamReplaceable","hasTag","klass","once","handleEose","handleClosed","stop","subscription","subscribe","on","start","clear"],"sourceRoot":"../../../src","sources":["hooks/subscribe.ts"],"mappings":"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","ignoreList":[]}
